<!DOCTYPE html>
<html>
<body style="background:black;color:#3aff7a;font-family:monospace">

<h2>LOGS</h2>
<div id="out"></div>

<input id="t" placeholder="title">
<input id="a" placeholder="author">
<textarea id="txt"></textarea>
<button onclick="add()">Add</button>

<script>
const s=JSON.parse(localStorage.getItem("session"));

function load(){
 fetch("/logs").then(r=>r.json()).then(d=>{
  out.innerHTML="";
  d.forEach(l=>{
   out.innerHTML+=`<div class="${l.color}">
   <h3>${l.title}</h3><b>${l.author}</b>
   ${l.paragraphs.map(p=>`<p>${p}</p>`).join("")}
   </div>`;
  });
 });
}

function add(){
 fetch("/logs",{method:"POST",headers:{'Content-Type':'application/json'},
 body:JSON.stringify({title:t.value,author:a.value,paragraphs:txt.value.split("\n\n"),color:s.color})})
 .then(load);
}

load();
</script>
</body>
</html>
