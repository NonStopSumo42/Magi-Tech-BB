<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MAGITECH BB â€“ LOGS</title>
<style>
body { background:black; color:#3aff7a; font-family:monospace; }
.log { border:1px solid #144; margin:8px; padding:8px; }
.blue{color:#2fd0ff;} .orange{color:#ff9a2f;}
</style>
</head>
<body>

<h2>TERMINAL LOGS</h2>
<div id="logs"></div>

<h3>New Log</h3>
<input id="title" placeholder="Title"><br>
<input id="author" placeholder="Author"><br>
<textarea id="text" placeholder="Paragraphs (blank line = new paragraph)"></textarea><br>
<button onclick="create()">Create Log</button>

<script>
const session = JSON.parse(localStorage.getItem("session"));

function load(){
  fetch("/logs").then(r=>r.json()).then(data=>{
    logs.innerHTML="";
    data.forEach(l=>{
      const d=document.createElement("div");
      d.className="log "+l.color;
      d.innerHTML=`<h3>${l.title}</h3><b>${l.author}</b><hr>`;
      l.paragraphs.forEach(p=>{
        d.innerHTML+=`<p>${p}</p>`;
      });
      logs.appendChild(d);
    });
  });
}

function create(){
  fetch("/logs",{
    method:"POST",
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({
      title:title.value,
      author:author.value,
      paragraphs:text.value.split("\n\n"),
      color: session.color
    })
  }).then(()=>{ text.value=""; load(); });
}

load();
</script>
</body>
</html>
